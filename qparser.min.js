/*! qparser 0.0.2 // 07.11.2013 // Vladimir Neverov <sanguini@gmail.com> // https://github.com/vne/qparser/wiki */
!function(){"use strict";function a(a){return a||(a={}),this.options=a,a.quotes&&(a.quotes.constructor===RegExp?this.QUOTES=a.quotes:a.quotes.constructor===String&&(this.QUOTES=new RegExp("["+a.quotes+"]"))),a.spaces&&(a.spaces.constructor===RegExp?this.SPACES=a.spaces:a.spaces.constructor===String&&(this.SPACES=new RegExp("["+a.spaces+"]"))),a.flags&&(a.flags.constructor===RegExp?this.FLAGS=a.flags:a.flags.constructor===String&&(this.FLAGS=new RegExp("["+a.flags+"]"))),a.instance?void 0:this.parse.bind(this)}a.prototype.QUOTES=/['"`]/,a.prototype.SPACES=/[ \t\r\n]/,a.prototype.FLAGS=/[~\+#!\*\/\\]/,a.prototype.STATES={DATA:0,APPEND:1,QUOTE:2},a.prototype.parse=function(a,b,c){var d,e,f,g,h,i,j=[],k={},l="",m=!1,n=!1,o=!1,p=0,q=this.STATES.DATA,r=function(){o&&("range"===k.type?k.to=l:l&&l.length&&(k.query=l),k.type||(k.type=k.prefix?"prefix":"string"),j.push(k),p&&p+1===j.length&&(g=j.pop(),f=j.pop(),j.push({type:"or",queries:[f,g]}),p=0)),(o||!k.flags)&&(k={},l="",n=!1,o=!1)};if(!a||!a.length||"string"!=typeof a)return j;for(e=b&&b.pos>=0?b.pos:0;e<a.length;)if(m||(d=a.charAt(e++)),m=!1,q===this.STATES.DATA)if("("===d)o?l+=d:(k.type="and",h={pos:e},k.queries=this.parse(a,h,")"),e=h.pos,k.queries&&k.queries.length&&(o=!0,q=this.STATES.APPEND,m=!0));else{if(d===c){b&&(b.pos=e);break}"|"===d?(p=j.length,o&&(q=this.STATES.APPEND,m=!0,p+=1)):":"===d?(k.prefix=l,k.type="prefix",l="",n=!1,o=!0):"-"===d?(k.type="range",k.from=l,l="",n=!1,o=!0):this.SPACES.test(d)?(q=this.STATES.APPEND,m=!0):this.QUOTES.test(d)?l.length?(l+=d,n=!0,o=!0):(q=this.STATES.QUOTE,i=d):this.FLAGS.test(d)?l.length?l+=d:(k.flags||(k.flags=[]),k.flags.push(d)):(l+=d,n=!0,o=!0)}else q===this.STATES.QUOTE?d===i?(i=void 0,q=this.STATES.APPEND,m=!0):(l+=d,n=!0,o=!0):q===this.STATES.APPEND&&(r(),q=this.STATES.DATA);return r(),j};try{module.exports=a}catch(b){window.QParser=a}}();